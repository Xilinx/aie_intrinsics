<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>AI Engine: Load/Store Operations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xilinx.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">AI Engine
   &#160;<span id="projectnumber">(AIE)             r2p18</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__intr__loadstore.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">Load/Store Operations<div class="ingroups"><a class="el" href="group__intrinsics.html">Intrinsics</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<p>The compiler supports pointer dereferencing and pointer arithmetic. No special intrinsics are needed to load or store vectors. For example:</p>
<div class="fragment"><div class="line">v4cint16 *input, *output;</div>
<div class="line"><span class="comment">// ... initialize input and output data pointers</span></div>
<div class="line"></div>
<div class="line">v4cint16 mydata = *input++;</div>
<div class="line">...</div>
<div class="line">*output = mydata;</div>
</div><!-- fragment --><p>The data pointers must be aligned to 128-bit boundary for either 128-bit or 256-bit vector loads/stores. Load/Store behaviour is undefined when stack-allocated vector variables are unaligned.</p>
<p>AIE cores are able to perform several vector load/store operations per instruction. However, in order for them to be executed in parallel they must target different memory banks. aiecompiler will try to evenly distribute buffers from communication primitives, and users can manually place buffers on specific banks by specifying the address range in the linker script file. In general the compiler will try to schedule many memory accesses in the same instruction when possible, but there are few exceptions. Memory accesses coming from the same pointer, will be scheduled on different instructions. Also, the compiler provides type annotations to associate memory accesses to virtual resources. Accesses using types that are associated to the same virtual resource will not be scheduled in the same instruction</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> func(v4cint16* in1, v4cint16* in2)</div>
<div class="line">{</div>
<div class="line">  v4cint16 mydata  = *(chess_storage(DM_bankA) in1++; </div>
<div class="line">v4cint16 mydata1 = *(chess_storage(DM_bankA) in2++;</div>
<div class="line">...</div>
<div class="line">}</div>
<div class="line"><span class="comment">// type annotations will let compiler know that the two pointers are pointing</span></div>
<div class="line"><span class="comment">// to same virtual resource and hence loads can not be scheduled in parallel.</span></div>
</div><!-- fragment --><p>There are 5 logical/virtual resources A,B,C,D and stack. </p>
<div class="fragment"><div class="line"><span class="preprocessor">#define __aie_dm_resource_a     chess_storage(DM_bankA)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define __aie_dm_resource_b     chess_storage(DM_bankB)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define __aie_dm_resource_c     chess_storage(DM_bankC)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define __aie_dm_resource_d     chess_storage(DM_bankD)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define __aie_dm_resource_stack chess_storage(DM_stack)</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">// either names can be used in source code to add type annotations on</span></div>
<div class="line"><span class="comment">// pointers.</span></div>
</div><!-- fragment --><p>For user convenience, an enum has been made available to select bank name as a template parameter.</p>
<div class="fragment"><div class="line"><span class="keyword">enum class</span> aie_dm_resource {</div>
<div class="line">    none,</div>
<div class="line">    a,</div>
<div class="line">    b,</div>
<div class="line">    c,</div>
<div class="line">    d,</div>
<div class="line">    stack</div>
<div class="line">};</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>256-bit loads from the same memory bank stalls the processor for one cycle since the memory datapath is 128-bits.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd>'upd' <a class="el" href="group__intrinsics.html">Intrinsics</a> (<a class="el" href="group__intr__gpvectorconv__updt.html">Updates</a>) to substitute newly loaded data into a specified lane of larger sized buffers </dd>
<dd>
'<a class="el" href="group__intr__gpvectorconv__srs.html#ga244dbd140ac7696d10e3f7f2feebc8fd">srs</a>' <a class="el" href="group__intrinsics.html">Intrinsics</a> (<a class="el" href="group__intr__gpvectorconv__srs.html">Shift-Round-Saturate</a>) to adjust and move accumulator data into regular variables before storing them in memory </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__intr__streams"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__intr__streams.html">Streams</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer"> UG1078 &copy; 2021 Xilinx, Inc. All rights reserved. 
    </li>
  </ul>
</div>
</body>
</html>
